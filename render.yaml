services:
  - type: web
    name: christian-fundraising-foundation  # Lowercase, no spaces (Render naming rules)
    runtime: python
    buildCommand: "./build.sh"
    startCommand: "gunicorn christianfoundation.wsgi:application"
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: christianfundraising_db
          property: connectionString
      - key: DJANGO_SETTINGS_MODULE
        value: christianfoundation.settings.production
      - key: SECRET_KEY
        generateValue: true  # Render will auto-generate this
      - key: PYTHON_VERSION
        value: 3.10.8  # Must match runtime.txt
      - key: DISABLE_COLLECTSTATIC
        value: 0  # Set to 1 if you have no static files
    plan: free  # Upgrade to "starter" ($7/month) for production
    numInstances: 1
    healthCheckPath: /health-check/  # Optional (create a simple view later)

databases:
  - name: christianfundraising_db
    plan: free  # Upgrade for production (free tier has 90-day data retention)
    databaseName: christianfundraising
    user: christianfundraising_user